<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project SYSTEM "../dtd/Project.dtd">

<project default="test">
    <!-- test not yet working due to a javascript error in htmlUnit -->
    <target name="test">

        <webtest name="check page Tree6 in Wiki">

            <callWikiPage pageName="Tree6" />

            <verifyText
                description="Check initOnload call"
                text="tv#{treeId}.initOnload(0,'property=Subsection+of&amp;category=Content&amp;initOnload=1&amp;urlparams=par%253Dval&amp;')"
            />

            <not description="Check that there is no opento command">
                <verifyText
                    description="Check for openToName"
                    text="tv#{treeId}.openToName\("
                />
            </not>
            <not description="Check that there are no leaf commands">
                <verifyText
                    description="no leafs"
                    text="tv#{treeId}\.setLeaf\(\d+\);"
                    regex="true"
                />
            </not>

            <checkAjaxResponse>
        		<verifyXPath
        		   description="tree is loaded"
        		   xpath="count(//div[@id='dtv#{treeId}0']/div[@class='dTreeNode'])"
        		   test="2" />
        	</checkAjaxResponse>

        </webtest>

    </target>
</project>
